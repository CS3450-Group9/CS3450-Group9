{% extends 'base.html' %}
{% block title %}User Profile{% endblock title %}

{% block content %}

{% if request.user.is_authenticated %}
<h1 class="text-center py-2">{{ request.user.userprofile.user | title }}'s Profile</h1>
<hr>

<div class="d-flex">

    <!-- Sidebar -->
    <ul class="d-flex nav nav-pills flex-column">
        <li class="nav-item" v-for="(tab, index) in tabs" :key="index" @click="selectedTab = tab.id">
            <a class="nav-link" :class="{ active: selectedTab === tab.id }" href="#">[[ tab.name ]]</a>
        </li>
    </ul>
    <!-- Sidebar -->

    <!-- Selected Tab Content -->
    <div class="d-flex">
        <component :is="selectedTab"/>
    </div>
    <!-- Selected Tab Content -->

</div>

{% else %}
<div>
    <p>User is not signed in!</p>
</div>
{% endif %}
{% endblock content %}

{% block vueapp %}
import { createApp } from 'vue';
let app = createApp({
    delimiters: ['[[', ']]'],
    data() {
        return {
            selectedTab: "info",
            tabs: [
                { id: 'info', name: 'Personal Info' },
                { id: 'balance', name: 'Manage Balance' },
                { id: 'reservations', name: 'Current Reservations' },
                { id: 'pass-change', name: 'Account Security' },
                { id: 'car-broke', name: 'Car Broke Down?' },
            ],
        }
    },
})
app.component('info', {
    template: `{% include 'Customer/profileTabs/personalInfo.html' %}`
})
app.component('balance', {
    template: `{% include 'Customer/profileTabs/manageBalance.html' %}`
})
app.component('reservations', {
    template: `{% include 'Customer/profileTabs/reservations.html' %}`
})
app.component('pass-change', {
    template: `{% include 'Customer/profileTabs/passChange.html' %}`
})
app.component('car-broke', {
    template: `{% include 'Customer/profileTabs/carBroke.html' %}`
})
app.mount('#app');
{% endblock vueapp %}
